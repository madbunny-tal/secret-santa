(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[820],{53:(e,r,t)=>{"use strict";t.d(r,{J:()=>n});var s=t(7876);t(4232);var a=t(9773),i=t(5870);function n(e){let{className:r,...t}=e;return(0,s.jsx)(a.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...t})}},727:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>n,wL:()=>o});var s=t(7876);t(4232);var a=t(5870);function i(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...t})}function n(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...t})}function l(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",r),...t})}function d(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",r),...t})}function c(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",r),...t})}function o(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",r),...t})}},4660:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/member/[id]",function(){return t(9978)}])},5870:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var s=t(9241),a=t(9573);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},7041:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var s=t(7876);t(4232);var a=t(2987),i=t(9518),n=t(5870);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:r,variant:t,size:i,asChild:d=!1,...c}=e,o=d?a.DX:"button";return(0,s.jsx)(o,{"data-slot":"button",className:(0,n.cn)(l({variant:t,size:i,className:r})),...c})}},7739:(e,r,t)=>{"use strict";t.d(r,{T:()=>i});var s=t(7876);t(4232);var a=t(5870);function i(e){let{className:r,...t}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...t})}},8871:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(6879).UU)("https://mqichvjbjuhwmbtpnklj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1xaWNodmpianVod21idHBua2xqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzODA1NzgsImV4cCI6MjA2Njk1NjU3OH0.pNK_Y1-e6ZaLOwZyLKcpppWK1MkAPRzQRIRgzqhvnYM")},8971:(e,r,t)=>{"use strict";t.d(r,{p:()=>i});var s=t(7876);t(4232);var a=t(5870);function i(e){let{className:r,type:t,...i}=e;return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...i})}},9558:(e,r,t)=>{"use strict";t.d(r,{AB:()=>d,J5:()=>c,Qp:()=>l,tH:()=>m,tJ:()=>u,w1:()=>o});var s=t(7876);t(4232);var a=t(2987),i=t(6108),n=t(5870);function l(e){let{...r}=e;return(0,s.jsx)("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...r})}function d(e){let{className:r,...t}=e;return(0,s.jsx)("ol",{"data-slot":"breadcrumb-list",className:(0,n.cn)("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",r),...t})}function c(e){let{className:r,...t}=e;return(0,s.jsx)("li",{"data-slot":"breadcrumb-item",className:(0,n.cn)("inline-flex items-center gap-1.5",r),...t})}function o(e){let{asChild:r,className:t,...i}=e,l=r?a.DX:"a";return(0,s.jsx)(l,{"data-slot":"breadcrumb-link",className:(0,n.cn)("hover:text-foreground transition-colors",t),...i})}function u(e){let{className:r,...t}=e;return(0,s.jsx)("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:(0,n.cn)("text-foreground font-normal",r),...t})}function m(e){let{children:r,className:t,...a}=e;return(0,s.jsx)("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:(0,n.cn)("[&>svg]:size-3.5",t),...a,children:null!=r?r:(0,s.jsx)(i.A,{})})}},9978:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var s=t(7876),a=t(8871),i=t(9099),n=t(4232),l=t(4587),d=t.n(l),c=t(7041),o=t(53),u=t(8971),m=t(727),f=t(7739),g=t(9688),x=t(9558);let h="https://mqichvjbjuhwmbtpnklj.supabase.co/storage/v1/object/public/images/",p=()=>{let e=(0,i.useRouter)(),[r,t]=(0,n.useState)(null),[l,p]=(0,n.useState)(""),[b,v]=(0,n.useState)({ref_image:!1,res_image:!1});async function j(e,t){if(null!=e.files&&e.files.length>0){let s=e.files[0],{data:i,error:n}=await a.A.storage.from("images").update((null==r?void 0:r.comm_id)+(t?"/ref/":"/res/")+(null==r?void 0:r.mem_id),s,{cacheControl:"3600",upsert:!0});i?((0,g.oR)("Upload Success"),t?v(e=>({...e,ref_image:!0})):v(e=>({...e,res_image:!0}))):console.log(n)}}(0,n.useEffect)(()=>{(async()=>{if(e.query.id){let{data:r,error:s}=await a.A.rpc("memberdetail",{token:e.query.id});console.log(r),s?console.log(s):(t(r[0]),v({ref_image:r[0].gift_reference,res_image:r[0].gift_created}))}})()},[e.query.id]),(0,n.useEffect)(()=>{(null==r?void 0:r.comm_status)!="CR"&&w()},[r]);let w=async()=>{let{data:e}=await a.A.storage.from("images").getPublicUrl((null==r?void 0:r.comm_id)+"/ref/"+(null==r?void 0:r.gift_for));e?p(e.publicUrl):console.log("Error loading image")},_=(e,s)=>{if(r)switch(e){case"gift_desc":t({...r,gift_desc:s});break;case"gift_letter":t({...r,gift_letter:s})}},N=async(e,t)=>{e.preventDefault();let s=new FormData(e.currentTarget);try{let{error:e}=await a.A.from("gift").update(Object.fromEntries(s)).eq(t?"gift_for":"gift_by",null==r?void 0:r.mem_id);e?console.log(e):(console.log(Object.fromEntries(s)),(0,g.oR)((t?"Reference":"Result")+"updated successfully"))}catch(e){console.log(e)}};return(0,s.jsxs)("div",{className:"container mx-auto py-8 w-11/12",children:[(0,s.jsx)(x.Qp,{className:"mb-8",children:(0,s.jsxs)(x.AB,{children:[(0,s.jsx)(x.J5,{children:(0,s.jsx)(x.w1,{href:"/",children:"Home"})}),(0,s.jsx)(x.tH,{}),(0,s.jsx)(x.J5,{children:(0,s.jsx)(x.w1,{href:"#",children:null==r?void 0:r.comm_name})}),(0,s.jsx)(x.tH,{}),(0,s.jsx)(x.J5,{children:(0,s.jsxs)(x.tJ,{children:[null==r?void 0:r.mem_name,"'s Dashboard"]})})]})}),(0,s.jsx)("div",{className:"flex gap-16",children:r&&(0,s.jsxs)("div",{className:"grid items-center w-full",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"center lg:w-4/12 sm:w-full text-3xl font-bold text-background bg-foreground p-2",children:(0,s.jsx)("h1",{className:"text-center",children:r.comm_name})}),(0,s.jsxs)("div",{className:"text-right lg:w-8/12 sm:w-full text-3xl font-bold p-2",children:[r.mem_name,"'s Dashboard"]})]}),(0,s.jsxs)("p",{className:"text-2xl m-4",children:["status: ",(0,s.jsx)("strong",{children:"CR"==r.comm_status?"Collecting Reference":"Drawing in progress"})]}),(0,s.jsx)("div",{className:"lg:flex w-full items-center gap-3",children:"CR"==r.comm_status?(0,s.jsxs)(m.Zp,{className:"lg:w-1/2 sm:w-full",children:[(0,s.jsxs)(m.aR,{children:[(0,s.jsxs)(m.ZB,{className:"mb-4 w-full flex justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl mb-4 w-full flex justify-between",children:"Reference Upload"}),r.gift_reference||b.ref_image?(0,s.jsx)("p",{children:"Reference submitted"}):(0,s.jsx)(s.Fragment,{})]}),(0,s.jsx)(m.BT,{children:"Upload character reference of gift you want and write description if necessary."})]}),(0,s.jsxs)("form",{onSubmit:e=>N(e,!0),children:[(0,s.jsx)(m.Wu,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(o.J,{htmlFor:"ref",children:"Upload reference"}),(0,s.jsx)(u.p,{id:"ref",type:"file",accept:"image/png, image/jpeg",onChange:e=>j(e.target,!0)}),(0,s.jsx)(u.p,{id:"is_ref",name:"is_ref",value:+!!b.ref_image,hidden:!0}),r.gift_reference||b.ref_image?(0,s.jsx)(d(),{src:h+r.comm_id+"/ref/"+r.mem_id,height:1080,width:1080,alt:"no image"}):(0,s.jsx)(s.Fragment,{})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(o.J,{htmlFor:"gift_desc",children:"Description"}),(0,s.jsx)(f.T,{id:"gift_desc",name:"gift_desc",placeholder:"Describe your desired character",value:r.gift_desc,onChange:e=>_("gift_desc",e.target.value)})]})]})}),(0,s.jsx)(m.wL,{className:"flex-col gap-2",children:(0,s.jsx)(c.$,{type:"submit",className:"w-full",children:"Submit Reference"})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(m.Zp,{className:"w-full max-w-sm",children:[(0,s.jsxs)(m.aR,{children:[(0,s.jsx)(m.ZB,{children:"Reference Download"}),(0,s.jsx)(m.BT,{children:"Download your reference and draw according to description if any."})]}),(0,s.jsxs)(m.Wu,{children:[(0,s.jsx)(d(),{src:l,alt:r.mem_name,className:"w-full object-cover rounded-2xl mb-4",width:1080,height:1080}),(0,s.jsx)(f.T,{id:"gift_desc",name:"gift_desc",placeholder:"Describe your desired character",value:r.gift_desc,readOnly:!0}),(0,s.jsx)("div",{className:"grid gap-2",children:(0,s.jsx)("a",{href:l,target:"_blank",children:(0,s.jsx)(c.$,{className:"w-full",children:"Download Reference"})})})]})]}),(0,s.jsxs)(m.Zp,{className:"w-full max-w-sm",children:[(0,s.jsxs)(m.aR,{children:[(0,s.jsxs)(m.ZB,{className:"mb-4 w-full flex justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl mb-4 w-full flex justify-between",children:"Result Upload"}),r.gift_created||b.res_image?(0,s.jsx)("p",{children:"Result submitted"}):(0,s.jsx)(s.Fragment,{})]}),(0,s.jsx)(m.BT,{children:"Upload gift result and maybe write some letter for the recipient."})]}),(0,s.jsxs)("form",{onSubmit:e=>N(e,!1),children:[(0,s.jsx)(m.Wu,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(o.J,{htmlFor:"res",children:"Upload result"}),(0,s.jsx)(u.p,{id:"res",type:"file",accept:"image/png, image/jpeg",onChange:e=>j(e.target,!1)}),(0,s.jsx)(u.p,{id:"is_res",name:"is_res",value:+!!b.res_image,hidden:!0}),r.gift_created||b.res_image?(0,s.jsx)(d(),{src:h+r.comm_id+"/res/"+r.mem_id,height:1080,width:1080,alt:"no image"}):(0,s.jsx)(s.Fragment,{})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(o.J,{htmlFor:"gift_letter",children:"Gift letter"}),(0,s.jsx)(f.T,{id:"gift_letter",name:"gift_letter",placeholder:"Write something for the gift receiver",value:r.gift_letter,onChange:e=>_("gift_letter",e.target.value)})]})]})}),(0,s.jsx)(m.wL,{className:"flex-col gap-2",children:(0,s.jsx)(c.$,{type:"submit",className:"w-full",children:"Submit Result"})})]})]})]})})]})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[862,212,636,593,792],()=>r(4660)),_N_E=e.O()}]);