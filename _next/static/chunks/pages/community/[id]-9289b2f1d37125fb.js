(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{53:(e,t,s)=>{"use strict";s.d(t,{J:()=>l});var a=s(7876);s(4232);var r=s(9773),n=s(5870);function l(e){let{className:t,...s}=e;return(0,a.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}},727:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>i,Zp:()=>n,aR:()=>l,wL:()=>c});var a=s(7876);s(4232);var r=s(5870);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",t),...s})}},1262:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/community/[id]",function(){return s(9225)}])},2161:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>u,Es:()=>f,HM:()=>c,L3:()=>h,c7:()=>x,lG:()=>i,rr:()=>g,zM:()=>o});var a=s(7876);s(4232);var r=s(6303),n=s(672),l=s(5870);function i(e){let{...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"dialog",...t})}function o(e){let{...t}=e;return(0,a.jsx)(r.l9,{"data-slot":"dialog-trigger",...t})}function d(e){let{...t}=e;return(0,a.jsx)(r.ZL,{"data-slot":"dialog-portal",...t})}function c(e){let{...t}=e;return(0,a.jsx)(r.bm,{"data-slot":"dialog-close",...t})}function m(e){let{className:t,...s}=e;return(0,a.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function u(e){let{className:t,children:s,showCloseButton:i=!0,...o}=e;return(0,a.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,a.jsx)(m,{}),(0,a.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...o,children:[s,i&&(0,a.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function x(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function f(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,l.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function h(e){let{className:t,...s}=e;return(0,a.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,l.cn)("text-lg leading-none font-semibold",t),...s})}function g(e){let{className:t,...s}=e;return(0,a.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,l.cn)("text-muted-foreground text-sm",t),...s})}},5870:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(9241),r=s(9573);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},7041:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var a=s(7876);s(4232);var r=s(2987),n=s(9518),l=s(5870);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:s,size:n,asChild:o=!1,...d}=e,c=o?r.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,l.cn)(i({variant:s,size:n,className:t})),...d})}},8871:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(6879).UU)("https://mqichvjbjuhwmbtpnklj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1xaWNodmpianVod21idHBua2xqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzODA1NzgsImV4cCI6MjA2Njk1NjU3OH0.pNK_Y1-e6ZaLOwZyLKcpppWK1MkAPRzQRIRgzqhvnYM")},8971:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(7876);s(4232);var r=s(5870);function n(e){let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},9225:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var a=s(7876),r=s(7041),n=s(4232),l=s(5870);function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,l.cn)("w-full caption-bottom text-sm",t),...s})})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,l.cn)("[&_tr]:border-b",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,l.cn)("[&_tr:last-child]:border-0",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,l.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function m(e){let{className:t,...s}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,l.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function u(e){let{className:t,...s}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,l.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}var x=s(8871),f=s(4587),h=s.n(f),g=s(9119),p=s(2161),b=s(7154);function j(e){let{...t}=e;return(0,a.jsx)(b.bL,{"data-slot":"dropdown-menu",...t})}function v(e){let{...t}=e;return(0,a.jsx)(b.l9,{"data-slot":"dropdown-menu-trigger",...t})}function w(e){let{className:t,sideOffset:s=4,...r}=e;return(0,a.jsx)(b.ZL,{children:(0,a.jsx)(b.UC,{"data-slot":"dropdown-menu-content",sideOffset:s,className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function N(e){let{...t}=e;return(0,a.jsx)(b.YJ,{"data-slot":"dropdown-menu-group",...t})}function y(e){let{className:t,inset:s,variant:r="default",...n}=e;return(0,a.jsx)(b.q7,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":r,className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function _(e){let{className:t,inset:s,...r}=e;return(0,a.jsx)(b.JU,{"data-slot":"dropdown-menu-label","data-inset":s,className:(0,l.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...r})}function k(e){let{className:t,...s}=e;return(0,a.jsx)(b.wv,{"data-slot":"dropdown-menu-separator",className:(0,l.cn)("bg-border -mx-1 my-1 h-px",t),...s})}var C=s(53),z=s(8971),M=s(826),R=s(822),S=s(3276),A=s(1575);function J(e){let{...t}=e;return(0,a.jsx)(M.bL,{"data-slot":"select",...t})}function E(e){let{...t}=e;return(0,a.jsx)(M.YJ,{"data-slot":"select-group",...t})}function I(e){let{...t}=e;return(0,a.jsx)(M.WT,{"data-slot":"select-value",...t})}function O(e){let{className:t,size:s="default",children:r,...n}=e;return(0,a.jsxs)(M.l9,{"data-slot":"select-trigger","data-size":s,className:(0,l.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[r,(0,a.jsx)(M.In,{asChild:!0,children:(0,a.jsx)(R.A,{className:"size-4 opacity-50"})})]})}function $(e){let{className:t,children:s,position:r="popper",...n}=e;return(0,a.jsx)(M.ZL,{children:(0,a.jsxs)(M.UC,{"data-slot":"select-content",className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[(0,a.jsx)(D,{}),(0,a.jsx)(M.LM,{className:(0,l.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(F,{})]})})}function q(e){let{className:t,...s}=e;return(0,a.jsx)(M.JU,{"data-slot":"select-label",className:(0,l.cn)("text-muted-foreground px-2 py-1.5 text-xs",t),...s})}function L(e){let{className:t,children:s,...r}=e;return(0,a.jsxs)(M.q7,{"data-slot":"select-item",className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(M.VF,{children:(0,a.jsx)(S.A,{className:"size-4"})})}),(0,a.jsx)(M.p4,{children:s})]})}function D(e){let{className:t,...s}=e;return(0,a.jsx)(M.PP,{"data-slot":"select-scroll-up-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(A.A,{className:"size-4"})})}function F(e){let{className:t,...s}=e;return(0,a.jsx)(M.wn,{"data-slot":"select-scroll-down-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(R.A,{className:"size-4"})})}var H=s(9688),T=s(9099),Z=s(727),U=s(9558);let P=()=>{let[e,t]=(0,n.useState)([]),[s,l]=(0,n.useState)(),[f,b]=(0,n.useState)(!1),[M,R]=(0,n.useState)(!1),[S,A]=(0,n.useState)(!1),[D,F]=(0,n.useState)(!1),[P,G]=(0,n.useState)(""),[V,B]=(0,n.useState)(),[X,Y]=(0,n.useState)(null),Q=(0,T.useRouter)(),W=e=>{window.open("/member/"+e)},K=async()=>{if(Q.query.id){let e=Q.query.id+"",{data:s,error:a}=await x.A.from("community").select("*, member(mem_id, mem_name, gift(gift_id, is_ref, is_res, gift_for, gift_by, gift_letter)), comm_status, status(status_name)").eq("comm_token",e.toUpperCase()).single();if(console.log(s),a)console.log("error: ",a);else if(s)if(l(s),"CR"!=s.comm_status){let e=s.member.map(e=>e.gift);t(s.member.map(t=>({...t,gift_created:e.filter(e=>e[0].gift_by==t.mem_id)[0][0].is_res})))}else t(s.member)}};(0,n.useEffect)(()=>{Q.isReady&&(console.log(Q.query.id),K())},[Q.isReady]);let ee=async()=>{if(alert("started"),s&&s.member.length>0){let e=s.member.map(e=>e.mem_id),t=e;for(;es(e,t);)t=et(e);let a=s.member.map(e=>e.gift[0].gift_id);console.log(a),console.log(e),console.log(t);let r=[];for(let s=0;s<e.length;s++)r.push({gift_id:a[s],gift_for:e[s],gift_by:t[s]});let{data:n,error:l}=await x.A.from("gift").upsert(r);l?console.log(l):(console.log(n),ea())}},et=e=>{let t=structuredClone(e);for(let e=t.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1));console.log(t[e]),console.log(t[s]),[t[e],t[s]]=[t[s],t[e]]}return t},es=(e,t)=>{for(let s=e.length-1;s>0;s--)if(e[s]==t[s])return!0;return!1},ea=async()=>{let{data:e,error:t}=await x.A.from("community").update({comm_status:"DP"}).eq("comm_id",null==s?void 0:s.comm_id).select();t?console.log(t):s&&(console.log(e),l({...s,comm_status:"DP"}))},er=async()=>{let{data:e,error:t}=await x.A.from("community").update({comm_status:"FR"}).eq("comm_id",null==s?void 0:s.comm_id).select();t?console.log(t):s&&(console.log(e),l({...s,comm_status:"FR"}))},en=async e=>{e.preventDefault();let s=new FormData(e.currentTarget);try{console.log(Object.fromEntries(s));let{data:e,error:a}=await x.A.from("member").insert(Object.fromEntries(s)).select();a?console.log(a):(e&&t(t=>[...e,...t]),B(e[0]),W(P),(0,H.oR)("Member added successfully"),b(!1))}catch(e){console.log(e)}},el=async e=>{e.preventDefault();let s=new FormData(e.currentTarget);try{let{error:e}=await x.A.from("member").update(Object.fromEntries(s)).eq("mem_id",null==X?void 0:X.member.mem_id);e?console.log(e):(t(e=>e.map(e=>e.mem_id===(null==X?void 0:X.member.mem_id)?{...e,...Object.fromEntries(s)}:e)),(0,H.oR)("Member edit successfully"),Y(null))}catch(e){console.log(e)}},ei=async()=>{try{console.log(null==X?void 0:X.member);let{error:e}=await x.A.from("member").delete().eq("mem_id",null==X?void 0:X.member.mem_id);e?console.log(e):(t(e=>e.filter(e=>e.mem_id!==(null==X?void 0:X.member.mem_id))),(0,H.oR)("Member deleted successfully"),Y(null))}catch(e){console.log(e)}},eo=async()=>{let{data:e,error:t}=await x.A.from("member").select("*").eq("mem_token",P);t?console.log("error: ",t):e.length>0&&void 0!=s&&(console.log("data: ",e[0].mem_id),console.log("owner: ",s.comm_owner),B(e[0]),e[0].mem_id==s.comm_owner&&F(!0),W(P))};return(0,a.jsxs)("div",{className:"container mx-auto py-8 w-10/12",children:[(0,a.jsx)(U.Qp,{className:"mb-8",children:(0,a.jsxs)(U.AB,{children:[(0,a.jsx)(U.J5,{children:(0,a.jsx)(U.w1,{href:"/",children:"Home"})}),(0,a.jsx)(U.tH,{}),(0,a.jsx)(U.J5,{children:(0,a.jsx)(U.tJ,{children:null==s?void 0:s.comm_name})})]})}),(0,a.jsxs)("div",{className:"mb-4 w-full flex justify-between",children:[(0,a.jsx)("div",{className:"text-3xl font-bold",children:null==s?void 0:s.comm_name}),V?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold",children:["Hi, ",V.mem_name,"!"]}),D&&((null==s?void 0:s.comm_status)=="CR"?(0,a.jsxs)(p.lG,{open:S,onOpenChange:A,children:[(0,a.jsx)(p.zM,{asChild:!0,children:(0,a.jsx)(r.$,{className:"font-bold",children:"Start Secret Santa"})}),(0,a.jsxs)(p.Cf,{className:"sm:max-w-md",children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Start Secret Santa"}),(0,a.jsx)(p.rr,{children:"Exchange the reference secretly between members"})]}),(0,a.jsx)("p",{children:"Make sure all member have sent their reference."}),(0,a.jsx)("p",{children:"Start Secret Santa now?"}),(0,a.jsx)(p.Es,{children:(0,a.jsxs)(p.HM,{children:[(0,a.jsx)(r.$,{type:"button",variant:"secondary",className:"cursor-pointer",children:"Cancel"}),(0,a.jsx)(r.$,{type:"button",onClick:ee,className:"cursor-pointer",children:"Start"})]})})]})]}):(0,a.jsxs)(p.lG,{open:S,onOpenChange:A,children:[(0,a.jsx)(p.zM,{asChild:!0,children:(0,a.jsx)(r.$,{className:"font-bold",children:"Reveal Result"})}),(0,a.jsxs)(p.Cf,{className:"sm:max-w-md",children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Reveal Result"}),(0,a.jsx)(p.rr,{children:"Finish event and reveal gifts from each other"})]}),(0,a.jsx)("p",{children:"Make sure all member have sent their results."}),(0,a.jsx)("p",{children:"Reveal Secret Santa now?"}),(0,a.jsx)(p.Es,{children:(0,a.jsxs)(p.HM,{children:[(0,a.jsx)(r.$,{type:"button",variant:"secondary",className:"cursor-pointer",children:"Cancel"}),(0,a.jsx)(r.$,{type:"button",onClick:er,className:"cursor-pointer",children:"Start"})]})})]})]}))]}):(0,a.jsx)(r.$,{onClick:()=>R(!0),className:"font-bold",size:"lg",children:"I'm a member"})]}),(0,a.jsxs)("h4",{className:"font-semibold text-2sl mb-4",children:["Status: ",null==s?void 0:s.status.status_name,"(",(null==s?void 0:s.comm_status)=="CR"?e.filter(e=>!0==e.gift_reference).length:e.filter(e=>!0==e.gift_created).length,"/",e.length,")"]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(i,{children:[(0,a.jsx)(o,{children:(0,a.jsxs)(c,{children:[(0,a.jsx)(m,{className:"font-bold",children:"Member Name"}),(0,a.jsx)(m,{className:"font-bold",children:"Status"}),D&&(0,a.jsx)(m,{children:"Manage"})]})}),(0,a.jsx)(d,{children:null==e?void 0:e.map(e=>(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{className:"flex gap-3 items-center w-full",children:e.mem_name}),(0,a.jsx)(u,{children:(0,a.jsx)("p",{children:(null==s?void 0:s.comm_status)!="CR"?e.gift_created?"Result sent":"In progress":e.gift&&e.gift[0].is_ref?"Reference sent":"Pending reference"})}),D&&(0,a.jsx)(u,{children:(0,a.jsxs)(j,{children:[(0,a.jsx)(v,{asChild:!0,className:"cursor-pointer",children:(0,a.jsx)(g.A,{})}),(0,a.jsxs)(w,{className:"w-56",children:[(0,a.jsx)(_,{children:"Action"}),(0,a.jsx)(k,{}),(0,a.jsxs)(N,{children:[(0,a.jsx)(y,{onClick:()=>Y({member:e,action:"edit"}),children:"Edit"}),(0,a.jsx)(y,{onClick:()=>Y({member:e,action:"delete"}),className:"text-red-400",children:"Delete"})]})]})]})})]},e.mem_id))})]}),(0,a.jsxs)(p.lG,{open:f,onOpenChange:b,children:[(null==s?void 0:s.comm_status)=="CR"&&!V&&(0,a.jsx)(p.zM,{asChild:!0,children:(0,a.jsx)(r.$,{className:"font-bold",onClick:()=>G(Math.random().toString(20).substring(2,6).toUpperCase()),children:"I'm a new member!"})}),(0,a.jsx)(p.Cf,{className:"sm:max-w-md",children:(0,a.jsxs)("form",{onSubmit:en,className:"space-y-4",children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Add Member"}),(0,a.jsxs)(p.rr,{children:["Join ",null==s?void 0:s.comm_name," Community"]})]}),(0,a.jsx)("div",{className:"grid w-full gap-4",children:(0,a.jsxs)("div",{className:"grid-w-full gap-1.5",children:[(0,a.jsx)(C.J,{htmlFor:"name",children:"Name"}),(0,a.jsx)(z.p,{id:"name",name:"mem_name",placeholder:"Insert Name",required:!0})]})}),(0,a.jsx)("div",{className:"grid w-full gap-4",children:(0,a.jsxs)("div",{className:"grid-w-full gap-1.5",children:[(0,a.jsx)(C.J,{children:"Community"}),(0,a.jsx)(z.p,{id:"comm",name:"comm_id",value:null==s?void 0:s.comm_id,readOnly:!0,hidden:!0}),(0,a.jsx)(z.p,{value:null==s?void 0:s.comm_name,disabled:!0})]})}),(0,a.jsx)("div",{className:"grid w-full gap-4",children:(0,a.jsxs)("div",{className:"grid-w-full gap-1.5",children:[(0,a.jsx)(C.J,{htmlFor:"mem_token",children:"Token"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(z.p,{value:P,id:"mem_token",name:"mem_token",className:"w-9/12",readOnly:!0}),(0,a.jsx)(r.$,{className:"w-3/12",type:"button",onClick:()=>{navigator.clipboard.writeText(P),(0,H.oR)("Token copied! Please save it to update your progress")},children:"Copy"})]}),(0,a.jsx)(p.rr,{children:"Copy your token to log in later"})]})}),(0,a.jsx)(p.Es,{children:(0,a.jsxs)(p.HM,{children:[(0,a.jsx)(r.$,{type:"button",variant:"secondary",className:"cursor-pointer",children:"Cancel"}),(0,a.jsx)(r.$,{type:"submit",className:"cursor-pointer",children:"Register"})]})})]})})]})]}),(null==s?void 0:s.comm_status)=="FR"&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-2xl mb-4 mt-8",children:"Result"}),(0,a.jsx)("div",{className:"lg:flex w-full items-center gap-3-full",children:e.map(t=>(0,a.jsxs)(Z.Zp,{id:"mem-".concat(t.mem_id),className:"sm:w-full md:w-full lg:w-1/2",children:[(0,a.jsx)(Z.aR,{children:(0,a.jsx)(Z.ZB,{children:(0,a.jsxs)("h3",{className:"text-xl mb-4",children:["Dear ",t.mem_name]})})}),(0,a.jsxs)(Z.Wu,{children:[(0,a.jsx)(h(),{src:"https://mqichvjbjuhwmbtpnklj.supabase.co/storage/v1/object/public/images/"+(null==s?void 0:s.comm_id)+"/res/"+t.gift[0].gift_by,alt:"no image",width:400,height:400,className:"w-full object-cover rounded-lg"}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:t.gift[0].gift_letter}),(0,a.jsxs)("h4",{className:"font-semibold text-xl",children:["by ",e.filter(e=>e.mem_id==t.gift[0].gift_by)[0].mem_name]})]})})]}),(0,a.jsx)(Z.wL,{children:(0,a.jsx)("a",{href:"",className:"w-full",children:(0,a.jsx)(r.$,{className:"w-full font-bold",size:"lg",children:"Download"})})})]},t.mem_id))})]}),(0,a.jsx)(p.lG,{open:null!==X&&(null==X?void 0:X.action)==="edit",children:(0,a.jsx)(p.Cf,{className:"sm:max-w-md",children:(0,a.jsxs)("form",{onSubmit:el,className:"space-y-4",children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Edit Member"}),(0,a.jsx)(p.rr,{children:"Make changes to member."})]}),(0,a.jsxs)("div",{className:"grid w-full gap-4",children:[(0,a.jsx)("div",{className:"grid-w-full gap-1.5"}),(0,a.jsx)(C.J,{htmlFor:"name",children:"Name"}),(0,a.jsx)(z.p,{id:"name",name:"mem_name",placeholder:"Insert Name",required:!0,defaultValue:null==X?void 0:X.member.mem_name})]}),(0,a.jsxs)("div",{className:"grid w-full gap-4",children:[(0,a.jsx)("div",{className:"grid-w-full gap-1.5"}),(0,a.jsx)(C.J,{htmlFor:"comm",children:"Community"}),(0,a.jsx)(z.p,{id:"comm",name:"comm_id",placeholder:"Insert Community",required:!0,defaultValue:null==X?void 0:X.member.comm_id})]}),(0,a.jsxs)("div",{className:"grid w-full gap-4",children:[(0,a.jsx)("div",{className:"grid-w-full gap-1.5"}),(0,a.jsx)(C.J,{htmlFor:"mem_token",children:"Category"}),(0,a.jsxs)(J,{name:"mem_token",defaultValue:"AD14",children:[(0,a.jsx)(O,{className:"w-full",children:(0,a.jsx)(I,{placeholder:"Select Category"})}),(0,a.jsx)($,{children:(0,a.jsxs)(E,{children:[(0,a.jsx)(q,{children:"Category"}),(0,a.jsx)(L,{value:"AD14",children:"Twitter Artist"})]})})]})]}),(0,a.jsx)(p.Es,{children:(0,a.jsxs)(p.HM,{children:[(0,a.jsx)(r.$,{variant:"secondary",type:"button",className:"cursor-pointer",children:"Cancel"}),(0,a.jsx)(r.$,{type:"submit",className:"cursor-pointer",children:"Edit Member"})]})})]})})}),(0,a.jsx)(p.lG,{open:null!==X&&(null==X?void 0:X.action)==="delete",onOpenChange:e=>{e||Y(null)},children:(0,a.jsxs)(p.Cf,{className:"sm:max-w-md",children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Delete Member"}),(0,a.jsx)(p.rr,{children:"Are you sure want to delete?"})]}),(0,a.jsx)(p.Es,{children:(0,a.jsxs)(p.HM,{children:[(0,a.jsx)(r.$,{variant:"secondary",type:"button",className:"cursor-pointer",children:"Cancel"}),(0,a.jsx)(r.$,{onClick:ei,variant:"destructive",className:"cursor-pointer",children:"Delete"})]})})]})}),(0,a.jsx)(p.lG,{open:M,onOpenChange:e=>{e||R(!1)},children:(0,a.jsxs)(p.Cf,{className:"sm:max-w-md",children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Member Dashboard"}),(0,a.jsx)(p.rr,{children:"Go to my dashboard"})]}),(0,a.jsxs)("div",{className:"grid w-full gap-4",children:[(0,a.jsx)("div",{className:"grid-w-full gap-1.5"}),(0,a.jsx)(C.J,{children:"Member token"}),(0,a.jsx)(z.p,{placeholder:"Insert 4 digits token",value:P,onChange:e=>G(e.currentTarget.value),required:!0})]}),(0,a.jsx)(p.Es,{children:(0,a.jsxs)(p.HM,{children:[(0,a.jsx)(r.$,{variant:"secondary",type:"button",className:"cursor-pointer",children:"Cancel"}),(0,a.jsx)(r.$,{onClick:eo,className:"cursor-pointer",children:"Enter"})]})})]})})]})}},9558:(e,t,s)=>{"use strict";s.d(t,{AB:()=>o,J5:()=>d,Qp:()=>i,tH:()=>u,tJ:()=>m,w1:()=>c});var a=s(7876);s(4232);var r=s(2987),n=s(6108),l=s(5870);function i(e){let{...t}=e;return(0,a.jsx)("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...t})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("ol",{"data-slot":"breadcrumb-list",className:(0,l.cn)("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("li",{"data-slot":"breadcrumb-item",className:(0,l.cn)("inline-flex items-center gap-1.5",t),...s})}function c(e){let{asChild:t,className:s,...n}=e,i=t?r.DX:"a";return(0,a.jsx)(i,{"data-slot":"breadcrumb-link",className:(0,l.cn)("hover:text-foreground transition-colors",s),...n})}function m(e){let{className:t,...s}=e;return(0,a.jsx)("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:(0,l.cn)("text-foreground font-normal",t),...s})}function u(e){let{children:t,className:s,...r}=e;return(0,a.jsx)("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:(0,l.cn)("[&>svg]:size-3.5",s),...r,children:null!=t?t:(0,a.jsx)(n.A,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[862,672,212,789,636,593,792],()=>t(1262)),_N_E=e.O()}]);